{"version":3,"names":["differenceInCalendarDays","DayPicker","rangeContainsModifiers","enUS","useMemo","useState","useCallback","COMMON_PROPS","MODIFIER_CLASSNAMES","clampNumberOfMonths","useControlledValue","useLocalizationProps","jsx","_jsx","usePreviewRange","selected","hoveredDate","excludeDisabled","min","max","disabled","from","previewHighlight","potentialNewRange","_selected$to","to","_selected$to2","undefined","DateRangeCalendar","defaultSelected","selectedProp","onSelect","numberOfMonths","locale","timeZone","props","localizationProps","mode","onChange","triggerDate","modifiers","e","setSelected","defaultValue","value","setHoveredDate","previewRange","preview","preview_start","preview_end","onDayMouseEnter","date","onDayMouseLeave","modifiersClassNames"],"sources":["@wordpress/components/src/calendar/date-range-calendar/index.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport { differenceInCalendarDays } from 'date-fns';\nimport { DayPicker, rangeContainsModifiers } from 'react-day-picker';\nimport { enUS } from 'react-day-picker/locale';\n/**\n * WordPress dependencies\n */\nimport { useMemo, useState, useCallback } from '@wordpress/element';\n/**\n * Internal dependencies\n */\nimport { COMMON_PROPS, MODIFIER_CLASSNAMES } from '../utils/constants';\nimport { clampNumberOfMonths } from '../utils/misc';\nimport { useControlledValue } from '../../utils/hooks';\nimport { useLocalizationProps } from '../utils/use-localization-props';\nimport type {\n\tDateRangeCalendarProps,\n\tDateRange,\n\tOnSelectHandler,\n} from '../types';\n\nexport function usePreviewRange( {\n\tselected,\n\thoveredDate,\n\texcludeDisabled,\n\tmin,\n\tmax,\n\tdisabled,\n}: Pick<\n\tDateRangeCalendarProps,\n\t'selected' | 'excludeDisabled' | 'min' | 'max' | 'disabled'\n> & {\n\thoveredDate: Date | undefined;\n} ) {\n\treturn useMemo( () => {\n\t\tif ( ! hoveredDate || ! selected?.from ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet previewHighlight: DateRange | undefined;\n\t\tlet potentialNewRange: { from: Date; to: Date } | undefined;\n\n\t\t// Hovering on a date before the start of the selected range\n\t\tif ( hoveredDate < selected.from ) {\n\t\t\tpreviewHighlight = {\n\t\t\t\tfrom: hoveredDate,\n\t\t\t\tto: selected.from,\n\t\t\t};\n\n\t\t\tpotentialNewRange = {\n\t\t\t\tfrom: hoveredDate,\n\t\t\t\tto: selected.to ?? selected.from,\n\t\t\t};\n\t\t} else if (\n\t\t\tselected.to &&\n\t\t\thoveredDate > selected.from &&\n\t\t\thoveredDate < selected.to\n\t\t) {\n\t\t\t// Hovering on a date between the start and end of the selected range\n\t\t\tpreviewHighlight = {\n\t\t\t\tfrom: selected.from,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\n\t\t\tpotentialNewRange = {\n\t\t\t\tfrom: selected.from,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\t\t} else if ( hoveredDate > selected.from ) {\n\t\t\t// Hovering on a date after the end of the selected range (either\n\t\t\t// because it's greater than selected.to, or because it's not defined)\n\t\t\tpreviewHighlight = {\n\t\t\t\tfrom: selected.to ?? selected.from,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\n\t\t\tpotentialNewRange = {\n\t\t\t\tfrom: selected.from,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tmin !== undefined &&\n\t\t\tmin > 0 &&\n\t\t\tpotentialNewRange &&\n\t\t\tdifferenceInCalendarDays(\n\t\t\t\tpotentialNewRange.to,\n\t\t\t\tpotentialNewRange.from\n\t\t\t) < min\n\t\t) {\n\t\t\tpreviewHighlight = {\n\t\t\t\tfrom: hoveredDate,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tmax !== undefined &&\n\t\t\tmax > 0 &&\n\t\t\tpotentialNewRange &&\n\t\t\tdifferenceInCalendarDays(\n\t\t\t\tpotentialNewRange.to,\n\t\t\t\tpotentialNewRange.from\n\t\t\t) > max\n\t\t) {\n\t\t\tpreviewHighlight = {\n\t\t\t\tfrom: hoveredDate,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\texcludeDisabled &&\n\t\t\tdisabled &&\n\t\t\tpotentialNewRange &&\n\t\t\trangeContainsModifiers( potentialNewRange, disabled )\n\t\t) {\n\t\t\tpreviewHighlight = {\n\t\t\t\tfrom: hoveredDate,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\t\t}\n\n\t\treturn previewHighlight;\n\t}, [ selected, hoveredDate, excludeDisabled, min, max, disabled ] );\n}\n\n/**\n * `DateRangeCalendar` is a React component that provides a customizable calendar\n * interface for **date range** selection.\n *\n * The component is built with accessibility in mind and follows ARIA best\n * practices for calendar widgets. It provides keyboard navigation, screen reader\n * support, and customizable labels for internationalization.\n */\nexport const DateRangeCalendar = ( {\n\tdefaultSelected,\n\tselected: selectedProp,\n\tonSelect,\n\tnumberOfMonths = 1,\n\texcludeDisabled,\n\tmin,\n\tmax,\n\tdisabled,\n\tlocale = enUS,\n\ttimeZone,\n\t...props\n}: DateRangeCalendarProps ) => {\n\tconst localizationProps = useLocalizationProps( {\n\t\tlocale,\n\t\ttimeZone,\n\t\tmode: 'range',\n\t} );\n\n\tconst onChange: OnSelectHandler< typeof selectedProp > = useCallback(\n\t\t( selected, triggerDate, modifiers, e ) => {\n\t\t\t// Convert internal `null` to `undefined` for the public event handler.\n\t\t\tonSelect?.( selected ?? undefined, triggerDate, modifiers, e );\n\t\t},\n\t\t[ onSelect ]\n\t);\n\n\tconst [ selected, setSelected ] = useControlledValue< typeof selectedProp >(\n\t\t{\n\t\t\tdefaultValue: defaultSelected,\n\t\t\tvalue: selectedProp,\n\t\t\tonChange,\n\t\t}\n\t);\n\n\tconst [ hoveredDate, setHoveredDate ] = useState< Date | undefined >(\n\t\tundefined\n\t);\n\n\t// Compute the preview range for hover effect\n\tconst previewRange = usePreviewRange( {\n\t\tselected,\n\t\thoveredDate,\n\t\texcludeDisabled,\n\t\tmin,\n\t\tmax,\n\t\tdisabled,\n\t} );\n\n\tconst modifiers = useMemo( () => {\n\t\treturn {\n\t\t\tpreview: previewRange,\n\t\t\tpreview_start: previewRange?.from,\n\t\t\tpreview_end: previewRange?.to,\n\t\t};\n\t}, [ previewRange ] );\n\n\treturn (\n\t\t<DayPicker\n\t\t\t{ ...COMMON_PROPS }\n\t\t\t{ ...localizationProps }\n\t\t\t{ ...props }\n\t\t\tmode=\"range\"\n\t\t\tnumberOfMonths={ clampNumberOfMonths( numberOfMonths ) }\n\t\t\tdisabled={ disabled }\n\t\t\texcludeDisabled={ excludeDisabled }\n\t\t\tmin={ min }\n\t\t\tmax={ max }\n\t\t\tselected={ selected ?? undefined }\n\t\t\tonSelect={ setSelected }\n\t\t\tonDayMouseEnter={ ( date ) => setHoveredDate( date ) }\n\t\t\tonDayMouseLeave={ () => setHoveredDate( undefined ) }\n\t\t\tmodifiers={ modifiers }\n\t\t\tmodifiersClassNames={ MODIFIER_CLASSNAMES }\n\t\t/>\n\t);\n};\n"],"mappings":"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","ignoreList":[]}