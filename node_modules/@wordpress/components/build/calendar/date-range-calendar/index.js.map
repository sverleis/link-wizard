{"version":3,"names":["_dateFns","require","_reactDayPicker","_locale","_element","_constants","_misc","_hooks","_useLocalizationProps","_jsxRuntime","usePreviewRange","selected","hoveredDate","excludeDisabled","min","max","disabled","useMemo","from","previewHighlight","potentialNewRange","_selected$to","to","_selected$to2","undefined","differenceInCalendarDays","rangeContainsModifiers","DateRangeCalendar","defaultSelected","selectedProp","onSelect","numberOfMonths","locale","enUS","timeZone","props","localizationProps","useLocalizationProps","mode","onChange","useCallback","triggerDate","modifiers","e","setSelected","useControlledValue","defaultValue","value","setHoveredDate","useState","previewRange","preview","preview_start","preview_end","jsx","DayPicker","COMMON_PROPS","clampNumberOfMonths","onDayMouseEnter","date","onDayMouseLeave","modifiersClassNames","MODIFIER_CLASSNAMES","exports"],"sources":["@wordpress/components/src/calendar/date-range-calendar/index.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport { differenceInCalendarDays } from 'date-fns';\nimport { DayPicker, rangeContainsModifiers } from 'react-day-picker';\nimport { enUS } from 'react-day-picker/locale';\n/**\n * WordPress dependencies\n */\nimport { useMemo, useState, useCallback } from '@wordpress/element';\n/**\n * Internal dependencies\n */\nimport { COMMON_PROPS, MODIFIER_CLASSNAMES } from '../utils/constants';\nimport { clampNumberOfMonths } from '../utils/misc';\nimport { useControlledValue } from '../../utils/hooks';\nimport { useLocalizationProps } from '../utils/use-localization-props';\nimport type {\n\tDateRangeCalendarProps,\n\tDateRange,\n\tOnSelectHandler,\n} from '../types';\n\nexport function usePreviewRange( {\n\tselected,\n\thoveredDate,\n\texcludeDisabled,\n\tmin,\n\tmax,\n\tdisabled,\n}: Pick<\n\tDateRangeCalendarProps,\n\t'selected' | 'excludeDisabled' | 'min' | 'max' | 'disabled'\n> & {\n\thoveredDate: Date | undefined;\n} ) {\n\treturn useMemo( () => {\n\t\tif ( ! hoveredDate || ! selected?.from ) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet previewHighlight: DateRange | undefined;\n\t\tlet potentialNewRange: { from: Date; to: Date } | undefined;\n\n\t\t// Hovering on a date before the start of the selected range\n\t\tif ( hoveredDate < selected.from ) {\n\t\t\tpreviewHighlight = {\n\t\t\t\tfrom: hoveredDate,\n\t\t\t\tto: selected.from,\n\t\t\t};\n\n\t\t\tpotentialNewRange = {\n\t\t\t\tfrom: hoveredDate,\n\t\t\t\tto: selected.to ?? selected.from,\n\t\t\t};\n\t\t} else if (\n\t\t\tselected.to &&\n\t\t\thoveredDate > selected.from &&\n\t\t\thoveredDate < selected.to\n\t\t) {\n\t\t\t// Hovering on a date between the start and end of the selected range\n\t\t\tpreviewHighlight = {\n\t\t\t\tfrom: selected.from,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\n\t\t\tpotentialNewRange = {\n\t\t\t\tfrom: selected.from,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\t\t} else if ( hoveredDate > selected.from ) {\n\t\t\t// Hovering on a date after the end of the selected range (either\n\t\t\t// because it's greater than selected.to, or because it's not defined)\n\t\t\tpreviewHighlight = {\n\t\t\t\tfrom: selected.to ?? selected.from,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\n\t\t\tpotentialNewRange = {\n\t\t\t\tfrom: selected.from,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tmin !== undefined &&\n\t\t\tmin > 0 &&\n\t\t\tpotentialNewRange &&\n\t\t\tdifferenceInCalendarDays(\n\t\t\t\tpotentialNewRange.to,\n\t\t\t\tpotentialNewRange.from\n\t\t\t) < min\n\t\t) {\n\t\t\tpreviewHighlight = {\n\t\t\t\tfrom: hoveredDate,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tmax !== undefined &&\n\t\t\tmax > 0 &&\n\t\t\tpotentialNewRange &&\n\t\t\tdifferenceInCalendarDays(\n\t\t\t\tpotentialNewRange.to,\n\t\t\t\tpotentialNewRange.from\n\t\t\t) > max\n\t\t) {\n\t\t\tpreviewHighlight = {\n\t\t\t\tfrom: hoveredDate,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\texcludeDisabled &&\n\t\t\tdisabled &&\n\t\t\tpotentialNewRange &&\n\t\t\trangeContainsModifiers( potentialNewRange, disabled )\n\t\t) {\n\t\t\tpreviewHighlight = {\n\t\t\t\tfrom: hoveredDate,\n\t\t\t\tto: hoveredDate,\n\t\t\t};\n\t\t}\n\n\t\treturn previewHighlight;\n\t}, [ selected, hoveredDate, excludeDisabled, min, max, disabled ] );\n}\n\n/**\n * `DateRangeCalendar` is a React component that provides a customizable calendar\n * interface for **date range** selection.\n *\n * The component is built with accessibility in mind and follows ARIA best\n * practices for calendar widgets. It provides keyboard navigation, screen reader\n * support, and customizable labels for internationalization.\n */\nexport const DateRangeCalendar = ( {\n\tdefaultSelected,\n\tselected: selectedProp,\n\tonSelect,\n\tnumberOfMonths = 1,\n\texcludeDisabled,\n\tmin,\n\tmax,\n\tdisabled,\n\tlocale = enUS,\n\ttimeZone,\n\t...props\n}: DateRangeCalendarProps ) => {\n\tconst localizationProps = useLocalizationProps( {\n\t\tlocale,\n\t\ttimeZone,\n\t\tmode: 'range',\n\t} );\n\n\tconst onChange: OnSelectHandler< typeof selectedProp > = useCallback(\n\t\t( selected, triggerDate, modifiers, e ) => {\n\t\t\t// Convert internal `null` to `undefined` for the public event handler.\n\t\t\tonSelect?.( selected ?? undefined, triggerDate, modifiers, e );\n\t\t},\n\t\t[ onSelect ]\n\t);\n\n\tconst [ selected, setSelected ] = useControlledValue< typeof selectedProp >(\n\t\t{\n\t\t\tdefaultValue: defaultSelected,\n\t\t\tvalue: selectedProp,\n\t\t\tonChange,\n\t\t}\n\t);\n\n\tconst [ hoveredDate, setHoveredDate ] = useState< Date | undefined >(\n\t\tundefined\n\t);\n\n\t// Compute the preview range for hover effect\n\tconst previewRange = usePreviewRange( {\n\t\tselected,\n\t\thoveredDate,\n\t\texcludeDisabled,\n\t\tmin,\n\t\tmax,\n\t\tdisabled,\n\t} );\n\n\tconst modifiers = useMemo( () => {\n\t\treturn {\n\t\t\tpreview: previewRange,\n\t\t\tpreview_start: previewRange?.from,\n\t\t\tpreview_end: previewRange?.to,\n\t\t};\n\t}, [ previewRange ] );\n\n\treturn (\n\t\t<DayPicker\n\t\t\t{ ...COMMON_PROPS }\n\t\t\t{ ...localizationProps }\n\t\t\t{ ...props }\n\t\t\tmode=\"range\"\n\t\t\tnumberOfMonths={ clampNumberOfMonths( numberOfMonths ) }\n\t\t\tdisabled={ disabled }\n\t\t\texcludeDisabled={ excludeDisabled }\n\t\t\tmin={ min }\n\t\t\tmax={ max }\n\t\t\tselected={ selected ?? undefined }\n\t\t\tonSelect={ setSelected }\n\t\t\tonDayMouseEnter={ ( date ) => setHoveredDate( date ) }\n\t\t\tonDayMouseLeave={ () => setHoveredDate( undefined ) }\n\t\t\tmodifiers={ modifiers }\n\t\t\tmodifiersClassNames={ MODIFIER_CLASSNAMES }\n\t\t/>\n\t);\n};\n"],"mappings":"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","ignoreList":[]}