{"version":3,"names":["_clsx","_interopRequireDefault","require","_compose","_i18n","_jsxRuntime","handleMouseDown","e","preventDefault","SuggestionsList","selectedIndex","scrollIntoView","match","onHover","onSelect","suggestions","displayTransform","instanceId","__experimentalRenderItem","listRef","useRefEffect","listNode","children","behavior","block","inline","handleHover","suggestion","handleClick","computeSuggestionMatch","matchText","normalize","toLocaleLowerCase","length","transformedSuggestion","indexOfMatch","indexOf","suggestionBeforeMatch","substring","suggestionMatch","suggestionAfterMatch","jsxs","ref","className","id","role","map","index","isSelected","isDisabled","disabled","key","value","clsx","output","item","jsx","onMouseDown","onClick","onMouseEnter","__","_default","exports","default"],"sources":["@wordpress/components/src/form-token-field/suggestions-list.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport clsx from 'clsx';\nimport type { MouseEventHandler, ReactNode } from 'react';\n\n/**\n * WordPress dependencies\n */\nimport { useRefEffect } from '@wordpress/compose';\nimport { __ } from '@wordpress/i18n';\n\n/**\n * Internal dependencies\n */\nimport type { SuggestionsListProps } from './types';\n\nconst handleMouseDown: MouseEventHandler = ( e ) => {\n\t// By preventing default here, we will not lose focus of <input> when clicking a suggestion.\n\te.preventDefault();\n};\n\nexport function SuggestionsList<\n\tT extends string | { value: string; disabled?: boolean },\n>( {\n\tselectedIndex,\n\tscrollIntoView,\n\tmatch,\n\tonHover,\n\tonSelect,\n\tsuggestions = [],\n\tdisplayTransform,\n\tinstanceId,\n\t__experimentalRenderItem,\n}: SuggestionsListProps< T > ) {\n\tconst listRef = useRefEffect< HTMLUListElement >(\n\t\t( listNode ) => {\n\t\t\t// only have to worry about scrolling selected suggestion into view\n\t\t\t// when already expanded.\n\t\t\tif (\n\t\t\t\tselectedIndex > -1 &&\n\t\t\t\tscrollIntoView &&\n\t\t\t\tlistNode.children[ selectedIndex ]\n\t\t\t) {\n\t\t\t\tlistNode.children[ selectedIndex ].scrollIntoView( {\n\t\t\t\t\tbehavior: 'instant',\n\t\t\t\t\tblock: 'nearest',\n\t\t\t\t\tinline: 'nearest',\n\t\t\t\t} );\n\t\t\t}\n\t\t},\n\t\t[ selectedIndex, scrollIntoView ]\n\t);\n\n\tconst handleHover = ( suggestion: T ) => {\n\t\treturn () => {\n\t\t\tonHover?.( suggestion );\n\t\t};\n\t};\n\n\tconst handleClick = ( suggestion: T ) => {\n\t\treturn () => {\n\t\t\tonSelect?.( suggestion );\n\t\t};\n\t};\n\n\tconst computeSuggestionMatch = ( suggestion: T ) => {\n\t\tconst matchText = displayTransform( match )\n\t\t\t.normalize( 'NFKC' )\n\t\t\t.toLocaleLowerCase();\n\t\tif ( matchText.length === 0 ) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst transformedSuggestion = displayTransform( suggestion );\n\t\tconst indexOfMatch = transformedSuggestion\n\t\t\t.normalize( 'NFKC' )\n\t\t\t.toLocaleLowerCase()\n\t\t\t.indexOf( matchText );\n\n\t\treturn {\n\t\t\tsuggestionBeforeMatch: transformedSuggestion.substring(\n\t\t\t\t0,\n\t\t\t\tindexOfMatch\n\t\t\t),\n\t\t\tsuggestionMatch: transformedSuggestion.substring(\n\t\t\t\tindexOfMatch,\n\t\t\t\tindexOfMatch + matchText.length\n\t\t\t),\n\t\t\tsuggestionAfterMatch: transformedSuggestion.substring(\n\t\t\t\tindexOfMatch + matchText.length\n\t\t\t),\n\t\t};\n\t};\n\n\treturn (\n\t\t<ul\n\t\t\tref={ listRef }\n\t\t\tclassName=\"components-form-token-field__suggestions-list\"\n\t\t\tid={ `components-form-token-suggestions-${ instanceId }` }\n\t\t\trole=\"listbox\"\n\t\t>\n\t\t\t{ suggestions.map( ( suggestion, index ) => {\n\t\t\t\tconst matchText = computeSuggestionMatch( suggestion );\n\t\t\t\tconst isSelected = index === selectedIndex;\n\t\t\t\tconst isDisabled =\n\t\t\t\t\ttypeof suggestion === 'object' && suggestion?.disabled;\n\t\t\t\tconst key =\n\t\t\t\t\ttypeof suggestion === 'object' && 'value' in suggestion\n\t\t\t\t\t\t? suggestion?.value\n\t\t\t\t\t\t: displayTransform( suggestion );\n\n\t\t\t\tconst className = clsx(\n\t\t\t\t\t'components-form-token-field__suggestion',\n\t\t\t\t\t{\n\t\t\t\t\t\t'is-selected': isSelected,\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tlet output: ReactNode;\n\n\t\t\t\tif ( typeof __experimentalRenderItem === 'function' ) {\n\t\t\t\t\toutput = __experimentalRenderItem( { item: suggestion } );\n\t\t\t\t} else if ( matchText ) {\n\t\t\t\t\toutput = (\n\t\t\t\t\t\t<span aria-label={ displayTransform( suggestion ) }>\n\t\t\t\t\t\t\t{ matchText.suggestionBeforeMatch }\n\t\t\t\t\t\t\t<strong className=\"components-form-token-field__suggestion-match\">\n\t\t\t\t\t\t\t\t{ matchText.suggestionMatch }\n\t\t\t\t\t\t\t</strong>\n\t\t\t\t\t\t\t{ matchText.suggestionAfterMatch }\n\t\t\t\t\t\t</span>\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\toutput = displayTransform( suggestion );\n\t\t\t\t}\n\n\t\t\t\t/* eslint-disable jsx-a11y/click-events-have-key-events */\n\t\t\t\treturn (\n\t\t\t\t\t<li\n\t\t\t\t\t\tid={ `components-form-token-suggestions-${ instanceId }-${ index }` }\n\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\tclassName={ className }\n\t\t\t\t\t\tkey={ key }\n\t\t\t\t\t\tonMouseDown={ handleMouseDown }\n\t\t\t\t\t\tonClick={ handleClick( suggestion ) }\n\t\t\t\t\t\tonMouseEnter={ handleHover( suggestion ) }\n\t\t\t\t\t\taria-selected={ index === selectedIndex }\n\t\t\t\t\t\taria-disabled={ isDisabled }\n\t\t\t\t\t>\n\t\t\t\t\t\t{ output }\n\t\t\t\t\t</li>\n\t\t\t\t);\n\t\t\t\t/* eslint-enable jsx-a11y/click-events-have-key-events */\n\t\t\t} ) }\n\t\t\t{ suggestions.length === 0 && (\n\t\t\t\t<li className=\"components-form-token-field__suggestion is-empty\">\n\t\t\t\t\t{ __( 'No items found' ) }\n\t\t\t\t</li>\n\t\t\t) }\n\t\t</ul>\n\t);\n}\n\nexport default SuggestionsList;\n"],"mappings":"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","ignoreList":[]}